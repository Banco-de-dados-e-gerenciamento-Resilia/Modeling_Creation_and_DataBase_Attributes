-- ATENÇÃO EXECUTAR EM DUAS ETAPAS

-- passo 1 Criação da função trigger  

	CREATE OR REPLACE FUNCTION ESTUDANTE_LOG_FUNC()
	RETURNS TRIGGER
	LANGUAGE PLPGSQL
	AS $$
	BEGIN
	INSERT INTO ESTUDANTE_AUDITORIA(ID_ESTUDANTE, DATA_INSERT) VALUES (NEW.ID_ESTUDANTE, CURRENT_TIMESTAMP);
	RETURN NEW;
	END;
	$$


-- passo 2 da criação do trigger

	CREATE TRIGGER LOG_TRIGGER
	AFTER INSERT ON ESTUDANTE
	FOR EACH ROW
	EXECUTE PROCEDURE ESTUDANTE_LOG_FUNC();
